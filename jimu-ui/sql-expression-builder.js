define(["jimu-core","jimu-ui","jimu-ui/sql-expression-runtime","jimu-ui/data-source-selector"],(function(e,t,n,o){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(o,s,function(t){return e[t]}.bind(null,s));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=789)}({0:function(t,n){t.exports=e},117:function(e,t){e.exports=n},14:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={iconSize:"Icon size",vertical:"Vertical",horizontal:"Horizontal",expand:"Expand",space:"Spacing",appearance:"Appearance",textAlign:"Text alignment",alignment:"Alignment",type:"Type",states:"States",textColor:"Text color",background:"Background",borderColor:"Border color",next:"Next",previous:"Previous",edit:"Edit",circle:"Circle",rectangle:"Rectangle",more:"More",noContent:"No content",copy:"Copy",location:"Location",advance:"Advanced",reset:"Reset",play:"Play",pause:"Pause",inherit:"Inherit",clear:"Clear",sqlExprIncomplete:"SQL expression is incomplete. Please complete it first.",builderName:"SQL Expression Builder",and:"AND",andLowerCase:"and",or:"OR",orLowerCase:"or",noDataTip:"Please add data first.",noClauseTip:"No clause. Please add one.",addClause:"Add clause",addClauseSet:"Add clause set",deleteClause:"Delete clause",deleteClauseSet:"Delete clause set",selectInputEditor:"Select a display style for source type",sourceType:"Select source type",userInput:"User input",field:"Field",unique:"Unique",single:"Single",multiple:"Multiple",inputEditorType:"Select display style",textBox:"Text box",fieldSelector:"Field selector",doubleNumberSelector:"Double text box",simpleSelect:"Dropdown list",multipleSelect:"Dropdown list",datePicker:"Date Picker",dateTimePicker:"DateTime Picker",caseSensitive:"Case sensitive",askForValues:"Ask for values",label:"Label",hint:"Hint",cascade:"List values based on",noneCascadeTip:"All unique values of this field",previousCascadeTip:"Values filtered by previous expressions",allCascadeTip:"Values filtered by all other expressions",stringOperatorIs:"is",stringOperatorIsNot:"is not",stringOperatorContains:"contains",stringOperatorDoesNotContain:"does not contain",stringOperatorStartsWith:"starts with",stringOperatorEndsWith:"ends with",stringOperatorIsAnyOf:"is any of",stringOperatorIsNoneOf:"is none of",dateOperatorIsOn:"is on",dateOperatorIsNotOn:"is not on",numberOperatorIs:"is",numberOperatorIsNot:"is not",numberOperatorIsAtLeast:"is at least",numberOperatorIsAtMost:"is at most",numberOperatorIsLessThan:"is less than",numberOperatorIsGreaterThan:"is greater than",numberOperatorIsBetween:"is between",numberOperatorIsNotBetween:"is not between",numberOperatorIsAnyOf:"is any of",numberOperatorIsNoneOf:"is none of",linkToString:"Link to",data:"Data",fill:"Fill",image:"Image",color:"Color",browse:"Browse",clearImage:"Clear image",position:"Position",fit:"Fit",center:"Center",middle:"Middle",tile:"Tile",stretch:"Stretch",dashed:"Dashed",dotted:"Dotted",double:"Double",solid:"Solid",offsetX:"Offset X",offsetY:"Offset Y",blurRadius:"Blur radius",spreadRadius:"Spread radius",T:"Top",R:"Right",B:"Bottom",L:"Left",TL:"Top left",TR:"Top right",BR:"Bottom right",BL:"Bottom left",lock:"Lock",unlock:"Unlock",changeUnit:"Change unit",left:"Left",top:"Top",right:"Right",up:"Up",down:"Down",justify:"Justify",font:"Font",fontSize:"Font size",convert:"Convert",convertToRem:"Convert to rem",bold:"Bold",italic:"Italic",underline:"Underline",strike:"Strikethrough",highlight:"Highlight color",fontColor:"Font color",ordered:"Ordered",numbering:"Numbering",bullet:"Bullets",link:"Link",linkTo:"Link to",characterSpacing:"Character spacing",lineSpacing:"Line spacing",indentLeft:"Decrease indent",indentRight:"Increase indent",normal:"Normal",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6",clearAllFormats:"Clear all formatting",textFormat:"Text format",dynamicContent:"Dynamic content",direction:"Direction",style:"Style",default:"Default",tabs:"Tabs",pills:"Pills",select:"Selected",numSelected:"{number} Selected",regular:"Regular",hover:"Hover",views:"Views",auto:"Auto",custom:"Custom",viewsSelected:"{viewNumber} views selected",attribute:"Attribute",statistics:"Statistics",expression:"Expression",operator:"Operator",name:"Name",insert:"Insert",fields:"Fields",functions:"Functions",invalidExpression:"Invalid expression",static:"Static",openIn:"Open in",appWindow:"App window",topWindow:"Top window",newWindow:"New window",webAddress:"Web address",none:"None",chooseAPage:"Select a page",chooseViews:"Select views",setLink:"Set link",setLinkForTitle:"Set link for {title}",ascending:"Ascending",decending:"Descending",optionNamePlaceholder:"Please enter the option name.",addOption:"Add an option",option:"Option",addSortBtntext:"Add a sort",noOptionRemindText:"There is no option.",noSortRemindText:"There is no sort.",pleaceAddOne:"Please add one.",deleteOption:"Delete",featureLayer:"Feature Layer",featureSet:"Feature Set",hubAnnotations:"Hub Annotations",hubEvents:"Hub Events",map:"Map",simpleLocal:"Simple Local",webMap:"Web Map",webScene:"Web Scene",csv:"CSV",filters:"Filters",widgets:"Widgets",mapping:"Mapping",layers:"Layers",connectToData:"Connect to data",setDataSource:"Select data",addNewData:"Add new data",pleaseAddData:"Please add data.",added:"Added",outputs:"Outputs",noAddedDataSourceCanBeUsed:"No added data can be used.",noSelectedType:"No selected type.",noDataTypeInTheApp:"No {dataType} in the app.",noWidgetOutputOfDataType:"No widget output of {dataType}.",noWidgetOutputCanBeUsed:"No widget output can be used.",all:"All",selectData:"Select data",addData:"Add data",serviceType:"Service type",url:"URL",add:"Add",appData:"App Data",done:"Done",hub:"Hub",unSupported:"Unsupported",selected:"Selected",pleaseSelectData:"Please select data",folder:"Folder",remove:"Remove",sort:"Sort",modified:"Modified",title:"Title",numViews:"View numbers",myContent:"My content",myOrganization:"My organization",public:"Public",noItemFoundWarning:"We couldn't find what you were looking for. Please try another one.",details:"Details",description:"Description",commonModalOk:"OK",commonModalCancel:"Cancel",owner:"Owner",updated:"Updated",setAnImage:"Select an image",localImage:"Local",urlImage:"URL",uploadImage:"Upload",nextStepForImage:"Next",urlIsHereForImage:"Type URL here",uploadImageError:"Error",imageTypeError:"You have specified an image type that is not supported. Please use one of these types: PNG, GIF, JPG, JPEG, BMP, SVG or SVGZ.",padding:"Padding",waitForThemeList:"Getting themes list...",themeSectionColor:"Color",themeSectionFont:"Font",themeSettingThemeColors:"Theme colors",themeSettingThemeColorsDescription:"Change the look of your app by customizing your theme colors. When you change these colors here, they will affect where they are used",themeSettingColorMode:"Color mode",themeSettingColoration:"Coloration",themeSettingAppElements:"App elements",themeSettingAppElementsDescription:"Define the colors for: header, body, and footer specifically.",themeSettingAppElementsDescription2:"These colors can be overridden in the Page's settings panel.",themeSettingThemeFontset:"Theme font set",themeSettingSize:"Size",themeLight:"Light",themeDark:"Dark",themeColorationMinimal:"Minimal",themeColorationDefault:"Default",themeFontDummyHeading:"Heading",themeFontDummyParagraph:"Lorem ipsum dolor sitamet, tur adipiscing elit...",themeHeadingTitle:"Heading",themeBodyTitle:"Body",useSharedTheme:"Use organization  shared theme",sharedThemeOrgNamePrefix:"Shared theme from:",saveAs:"Save as",variableColorPrimary:"Primary",variableColorSecondary:"Secondary",variableColorThird:"Third",variableColorFourth:"Fourth",variableColorFifth:"Fifth",variableColorLight:"Light",variableColorDark:"Dark",variableColorSuccess:"Success",variableColorInfo:"Info",variableColorWarning:"Warning",variableColorDanger:"Danger",variableTypography:"Typography",variableBg:"Background",variableColor:"Text",variableFontFamilyBase:"Font family",variableFontSizeBase:"Base font size",variableHeader:"Header",variableBody:"Body",variableFooter:"footer",variableLink:"Link",variableButton:"Button",variableCustomPalette:"Customize palette colors",variableCustomFontset:"Customize font set",setIcon:"Select icon",iconViewerModalTitle:"Select an icon",removeIcon:"Remove icon",myIcons:"My icons",IconGroup_general:"General",IconGroup_arrows:"Arrows",iconBackground:"Icon background",themeColor:"Theme colors",customColor:"Custom colors",moreColor:"More colors",customize:"Custom",recent:"Recent",standard:"Standard",noColor:"No color",themeColorTip:"Select a color from your theme",customColorTip:"Customize your color. If you pick custom color, it will not be affected by theme setting.",orgColors:"Organization colors",sharedThemeColorTip:"Select a color defined in your organization shared theme",qrCodeSaveBtnLabel:"Save as image",width:"Width",height:"Height",myProfile:"My profile",accountHelp:"Help",switchAccount:"Switch accounts",signOut:"Sign out",signIn:"Sign in",share:"Share",sharelink:"Share link",email:"Email",embed:"Embed",facebook:"Facebook",qrcode:"QR code",twitter:"Twitter",mapFailure:"Creating map failed.",ZoomLabel:"Zoom",HomeLabel:"Home",NavigationLabel:"Navigation",LocateLabel:"Locate",CompassLabel:"Compass",SearchLabel:"Search",LayersLabel:"Layers",BaseMapLabel:"Basemap",MeasureLabel:"Measure",FullScreenLabel:"Fullscreen",ScaleBarLabel:"Scale bar",LayersLabelLayer:"Layer",LayersLabelLegend:"Legend",LegendLabel:"Legend",zoomIn:"Zoom in",zoomOut:"Zoom out",zoomToFit:"Fit width to current window",openSettingPanel:"Open setting panel",closeSettingPanel:"Close setting panel",switchPage:"Switch page",basic:"Basic"}},153:function(e,t){e.exports='<svg viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg"><path d="M4.5 8h-1V1.9L.7 4.7 0 4l4-4 4 4-.7.7-2.8-2.8z" fill-rule="evenodd"></path></svg>'},154:function(e,t){e.exports='<svg viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg"><path d="M4.5 0v6.1l2.8-2.8.7.7-4 4-4-4 .7-.7 2.8 2.8V0z" fill-rule="evenodd"></path></svg>'},158:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 0a.75.75 0 01.75.75v6.5h6.5a.75.75 0 110 1.5h-6.5v6.5a.75.75 0 11-1.5 0v-6.5H.75a.75.75 0 110-1.5h6.5V.75A.75.75 0 018 0z" fill="#000" fill-rule="evenodd"></path></svg>'},197:function(e,t){e.exports=o},3:function(e,n){e.exports=t},331:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M16 9v6H0V9h16zm-1 1H1v4h14v-4zM4 11v2H2v-2h2zM16 1v6H0V1h16zm-1 1H1v4h14V2zM4 3v2H2V3h2z" fill="#FFF" fill-rule="evenodd"></path></svg>'},332:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 0a8 8 0 110 16A8 8 0 018 0zm0 .941A7.059 7.059 0 108 15.06 7.059 7.059 0 008 .94zm4.5 9.559v1h-9v-1h9zm-3-3v1h-6v-1h6zm3-3v1h-9v-1h9z" fill="#FFF" fill-rule="nonzero"></path></svg>'},333:function(e,t){e.exports='<svg viewBox="0 0 17 17" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M8 16.5a8 8 0 110-16 8 8 0 010 16zm0-.941A7.059 7.059 0 108 1.44 7.059 7.059 0 008 15.56zM3.5 5h9v1h-9V5zm0 3h6v1h-6V8zm0 3h9v1h-9v-1z" fill="#FFF" fill-rule="nonzero"></path><g transform="translate(10)"><circle fill="#007F94" cx="3.5" cy="3.5" r="3.5"></circle><path fill="#FFF" fill-rule="nonzero" d="M1.652 3.274L1 3.948l1.84 1.93L6 2.696 5.369 2 2.861 4.5z"></path></g></g></svg>'},334:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13.132 5.853c.476 0 .888.079 1.238.237.35.158.637.373.86.645.224.272.392.593.504.963.112.37.168.767.168 1.192v3.38c0 .26.007.535.021.824.014.288.04.525.077.71h-1.19a5.604 5.604 0 01-.111-1.11h-.042a2.733 2.733 0 01-.916.963c-.369.229-.805.343-1.309.343-.26 0-.534-.04-.818-.122a2.225 2.225 0 01-.776-.4 2.165 2.165 0 01-.581-.735c-.154-.305-.23-.68-.23-1.127 0-.587.134-1.053.405-1.396a2.56 2.56 0 011.063-.783c.438-.18.933-.297 1.483-.351.55-.055 1.105-.082 1.665-.082v-.212c0-.577-.15-1.004-.448-1.282-.298-.277-.695-.416-1.189-.416-.373 0-.725.084-1.056.253a2.687 2.687 0 00-.833.645l-.7-.98c.327-.359.726-.642 1.197-.849.471-.207.977-.31 1.518-.31zM5.554 2l4.253 11.56H8.24l-1.007-2.842h-4.7l-.994 2.841H0L4.295 2h1.26zm9.089 8.114h-.322c-.326 0-.664.017-1.014.05-.35.032-.667.097-.952.195-.284.098-.52.245-.706.441-.187.196-.28.457-.28.784 0 .228.04.419.12.571.078.152.183.278.314.376.13.098.275.166.434.204.158.038.321.057.49.057.615 0 1.088-.215 1.42-.645.33-.43.496-.971.496-1.625v-.408zm-9.76-6.236l-1.861 5.42h3.707l-1.846-5.42z" fill="#FFF" fill-rule="nonzero"></path></svg>'},335:function(e,t){e.exports='<svg viewBox="0 0 18 16" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M1.539 15.56H0L4.295 4h1.26l4.252 11.56H8.24l-1.007-2.842h-4.7l-.994 2.841zm1.483-4.262h3.707l-1.846-5.42-1.861 5.42zm11.62-.506c0-.577-.148-1.004-.447-1.282-.298-.277-.695-.416-1.189-.416-.373 0-.725.084-1.056.253a2.687 2.687 0 00-.833.645l-.7-.98c.327-.359.726-.642 1.197-.849.471-.207.977-.31 1.518-.31.476 0 .888.079 1.238.237.35.158.637.373.86.645.224.272.392.593.504.963.112.37.168.767.168 1.192v3.38c0 .26.007.535.021.824.014.288.04.525.077.71h-1.19a5.604 5.604 0 01-.111-1.11h-.042a2.733 2.733 0 01-.916.963c-.369.229-.805.343-1.309.343-.26 0-.534-.04-.818-.122a2.225 2.225 0 01-.776-.4 2.165 2.165 0 01-.581-.735c-.154-.305-.23-.68-.23-1.127 0-.587.134-1.053.405-1.396a2.56 2.56 0 011.063-.783c.438-.18.933-.297 1.483-.351.55-.055 1.105-.082 1.665-.082v-.212zm-.32 1.322c-.327 0-.665.017-1.015.05-.35.032-.667.097-.952.195-.284.098-.52.245-.706.441-.187.196-.28.457-.28.784 0 .228.04.419.12.571.078.152.183.278.314.376.13.098.275.166.434.204.158.038.321.057.49.057.615 0 1.088-.215 1.42-.645.33-.43.496-.971.496-1.625v-.408h-.322z" fill="#FFF" fill-rule="nonzero"></path><g transform="translate(11)"><circle fill="#007F94" cx="3.5" cy="3.5" r="3.5"></circle><path fill="#FFF" fill-rule="nonzero" d="M1.652 3.274L1 3.948l1.84 1.93L6 2.696 5.369 2 2.861 4.5z"></path></g></g></svg>'},336:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 32"><path d="M16.492 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zm0 21.333a2 2 0 11.001 3.999 2 2 0 01-.001-3.999zm0-2.666a2 2 0 01-2-2v-8a2 2 0 114 0v8a2 2 0 01-2 2z"></path></svg>'},34:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 6.598L14.308.29a.991.991 0 011.402 1.402L9.402 8l6.308 6.308a.991.991 0 01-1.402 1.402L8 9.402 1.692 15.71A.991.991 0 01.29 14.308L6.598 8 .29 1.692A.991.991 0 011.692.29L8 6.598z" fill="#000" fill-rule="nonzero"></path></svg>'},35:function(e,t){e.exports='<svg viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="none"><path d="M7.745 7l4.1 4.1a.527.527 0 01-.745.746L7 7.746l-4.1 4.1a.527.527 0 01-.746-.746l4.1-4.1-4.1-4.1a.527.527 0 01.746-.746l4.1 4.1 4.1-4.1a.527.527 0 01.746.746L7.746 7z" fill="#000"></path><path d="M1 1h12v12H1z"></path></g></svg>'},435:function(e,t,n){"use strict";var o,s=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(3),i=n(436),l=n(797),p=n(14),c=n(117),u=n(158),d=function(e){function t(t){var n=e.call(this,t)||this;n.i18nMessage=function(e){return n.props.intl.formatMessage({id:e,defaultMessage:p.default[e]})},n.addClause=function(){var e=c.getDefaultSingleClause(),t=n.state.partsArray.concat(e);n._setStates(t)},n.addClauseSet=function(){var e=c.getDefaultClauseSet(),t=n.state.partsArray.concat(e);n._setStates(t)},n.changeAndOR=function(e){n.setState({logicalOperator:e})},n.onChange=function(e,t){var o=c.getClauseArrayByChange(n.state.partsArray,e,t);n._setStates(o)},n.triggerChangeEvent=function(){var e=a.Immutable({sql:n.state.sql,displaySQL:n.state.displaySQL,logicalOperator:n.state.logicalOperator,parts:n.state.partsArray.asMutable({deep:!0})}),t=a.dataSourceUtils.getArcGISSQL(e,n.props.selectedDs,n.props.intl);t.sql!==e.sql?n.setState({sql:t.sql,displaySQL:t.displaySQL}):n.props.onChange&&n.props.onChange(e)},n._setStates=function(e){e.length<2?n.setState({partsArray:e,logicalOperator:a.ClauseLogic.And}):n.setState({partsArray:e})};var o=n.props.selectedDs;return o&&(n.isHosted=a.dataSourceUtils.isHostedService(o.url)),n.state={sql:n.props.config&&n.props.config.sql?n.props.config.sql:"",displaySQL:n.props.config&&n.props.config.displaySQL?n.props.config.displaySQL:"",logicalOperator:n.props.config&&n.props.config.logicalOperator?n.props.config.logicalOperator:a.ClauseLogic.And,partsArray:n.props.config&&n.props.config.parts?n.props.config.parts:a.Immutable([])},n}return s(t,e),t.prototype.componentDidUpdate=function(e,t){this.state.partsArray===t.partsArray&&this.state.sql===t.sql&&this.state.logicalOperator===t.logicalOperator||this.triggerChangeEvent()},t.prototype.render=function(){var e=this,t=this.props.mode?this.props.mode:c.SqlExpressionMode.All;return a.jsx("div",{className:this.props.className?this.props.className:""},a.jsx("div",{style:this.props.style,className:"sql-expression-builder"},this.props.selectedDs?a.jsx("div",null,a.jsx("div",{className:"builder-btn-container"},this.state.partsArray.length<2?null:a.jsx(r.ButtonGroup,{className:"and-or-container"},a.jsx(r.Button,{onClick:function(){e.changeAndOR(a.ClauseLogic.And)},className:"ml-0",type:this.state.logicalOperator===a.ClauseLogic.And?"primary":"default"},this.i18nMessage("and")),a.jsx(r.Button,{onClick:function(){e.changeAndOR(a.ClauseLogic.Or)},className:"ml-0",type:this.state.logicalOperator===a.ClauseLogic.Or?"primary":"default"},this.i18nMessage("or"))),a.jsx("div",{className:"add-button-container"},a.jsx(r.Button,{onClick:this.addClause},a.jsx(r.Icon,{icon:u,className:"mr-1"}),this.i18nMessage("addClause")),a.jsx(r.Button,{onClick:this.addClauseSet,className:"ml-2"},a.jsx(r.Icon,{icon:u,className:"mr-1"}),this.i18nMessage("addClauseSet")))),a.jsx("div",{className:"sql-expression-container"},0===this.state.partsArray.length?a.jsx("div",{className:"no-data-tip"},this.i18nMessage("noClauseTip")):this.state.partsArray.map((function(n,o){return n.type===a.ClauseType.Single?a.jsx(i.default,{key:o,id:"clause_"+o,config:n,isHosted:e.isHosted,mode:t,selectedDs:e.props.selectedDs,onChange:e.onChange}):a.jsx(l.default,{key:o,id:"clause_set_"+o,config:n,isHosted:e.isHosted,mode:t,selectedDs:e.props.selectedDs,onChange:e.onChange})})))):a.jsx("div",{className:"no-data-tip"},this.i18nMessage("noDataTip"))))},t}(a.React.PureComponent),g=a.themeUtils.withStyles(a.injectIntl(d),"SqlExpressionBuilder");t.default=g},436:function(e,t,n){"use strict";var o,s=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(3),i=n(197),l=n(795),p=n(14),c=n(796),u=n(117),d=n(332),g=n(333),h=n(34),f=n(334),m=n(335),v=[a.ClauseSourceType.SingleSelectFromUnique,a.ClauseSourceType.MultipleSelectFromUnique],y=function(e){function t(t){var n=e.call(this,t)||this;return n.getFieldObj=function(){var e=n.props.selectedDs.getSchema().fields;n.fieldObj=n.props.config.jimuFieldName?a.Immutable(e[n.props.config.jimuFieldName]):null},n._updateTwoStates=function(e,t,o){n._updateCaseSensitiveState(e,t),n._updateAskForValueState(e,t),o&&n.setState({rerender:!0})},n.i18nMessage=function(e){return n.props.intl.formatMessage({id:e,defaultMessage:p.default[e]})},n.isCascadeSupported=function(){return v.indexOf(n.props.config.valueOptions.sourceType)>=0},n.getOperatorsByField=function(e){var t=[];return e&&e.type&&(t=u.getOperatorsByShortType(e.type)),t},n.deleteClause=function(){n.props&&n.props.onChange(null,n.props.id)},n.toggleCaseSensitive=function(){n.onChanged({caseSensitive:!n.props.config.caseSensitive})},n.toggleAskForValue=function(){n.setState({isAskForValuePanelDisplay:!n.state.isAskForValuePanelDisplay})},n.clickAskForValueCBX=function(e){if(e.target.checked){var t={label:n.getLabel(),hint:"",cascade:n.isCascadeSupported()?a.ClauseCascade.None:null};n.onChanged({askForValueOptions:t})}else n.onChanged({askForValueOptions:null})},n.getLabel=function(){return n.props.config.operator?(n.fieldObj.alias||n.fieldObj.name)+" "+n.i18nMessage(u.getCamelCase(n.props.config.operator)):""},n.onAskForValueOptsChange=function(e){var t=Object.assign({},n.props.config.askForValueOptions,e);n.onChanged({askForValueOptions:t})},n.onFieldChange=function(e,t){n.fieldObj=a.Immutable(t);var o=n._updateOptionsByField(t);n._updateTwoStates(n.operatorList[0],o.sourceType),n.onChanged({jimuFieldName:t.jimuName,operator:n.operatorList[0],caseSensitive:!1,askForValueOptions:null,valueOptions:o})},n._updateOptionsByField=function(e,t){return n.operatorList=n.getOperatorsByField(e),t=t||n.operatorList[0],n._updateOptionsByOperator(e,t,e.jimuName)},n.onOperatorChange=function(e){var t=n._updateOptionsByOperator(n.fieldObj,e,n.fieldObj.jimuName);n._updateTwoStates(e,t.sourceType),n.onChanged({operator:e,caseSensitive:!1,askForValueOptions:null,valueOptions:t})},n._updateOptionsByOperator=function(e,t,o){var s=u.getDisplayTypes(n.props.mode,e,t,n.props.selectedDs,o);return n.displayTypeList=s.displayTypes,n.codedValues=s.codedValues,u.getDefaultClauseValObj(s.defaultSourceType,s.defaultInputEditorType)},n.onValueOptsChange=function(e){n.onChanged({valueOptions:e})},n.onDisplayTypeSelect=function(e,t){n.setState({isAskForValuePanelDisplay:!1});var o=u.getDefaultClauseValObj(e,t);n.onChanged({valueOptions:o,askForValueOptions:null})},n.onChanged=function(e){var t=Object.assign({},n.props.config,e),o=!0;if(null===t.askForValueOptions&&(o=!(null===t.valueOptions.value||t.valueOptions.value.filter((function(e){return null===e})).length>0)),o!==t.valueOptions.isValid){var s=u.getDefaultClauseValObj(t.valueOptions.sourceType,t.valueOptions.inputEditor,t.valueOptions.value,o);t=Object.assign({},t,{valueOptions:s})}n.props&&n.props.onChange(t,n.props.id)},n.state={rerender:!1,supportCaseSensitive:!1,supportAskForValue:!1,isAskForValuePanelDisplay:!1},n.getFieldObj(),n.codedValues=n.props.config&&n.fieldObj?n.getCodedValues():null,n}return s(t,e),t.prototype.getCodedValues=function(){return u.getInputEditorListByOperatorAndSourceType(this.props.config.operator,this.props.config.valueOptions.sourceType,this.props.selectedDs,this.fieldObj.jimuName).codedValues},t.prototype.componentDidMount=function(){this.props.config.operator&&(this._updateOptionsByField(this.fieldObj,this.props.config.operator),this._updateTwoStates(this.props.config.operator,this.props.config.valueOptions.sourceType,!0))},t.prototype._updateCaseSensitiveState=function(e,t){var n=u.isCaseSensitiveSupportedByOperatorAndSourceType(e,t);this.setState({supportCaseSensitive:n})},t.prototype._updateAskForValueState=function(e,t){var n=u.isAskForValueSupportedByOperatorAndSourceType(e,t);this.setState({supportAskForValue:n}),this.setState({isAskForValuePanelDisplay:!1})},t.prototype.render=function(){var e=this;return a.jsx("div",{className:this.props.className?this.props.className:""},a.jsx("div",{className:"sql-expression-single"},a.jsx("div",{className:"form-custom-inline"},a.jsx(r.Col,{md:3,className:"p-1"},a.jsx(i.FieldSelector,{dataSources:[this.props.selectedDs],onSelect:this.onFieldChange,selectedFields:this.fieldObj?a.Immutable([this.fieldObj.jimuName]):null,isDataSourceDropDownHidden:!0,isSearchInputHidden:!0,useDropdown:!0})),a.jsx(r.Col,{md:3,className:"p-1"},a.jsx(l.OperatorSelector,{onChange:this.onOperatorChange,value:this.props.config.operator,list:this.operatorList})),a.jsx(r.Col,{md:3,className:"p-1 d-flex"},a.jsx(c.default,{onSelect:this.onDisplayTypeSelect,list:this.displayTypeList,sourceType:this.props.config.valueOptions.sourceType,inputEditorType:this.props.config.valueOptions.inputEditor}),a.jsx(u.InputEditorRender,{onChange:this.onValueOptsChange,selectedDs:this.props.selectedDs,codedValues:this.codedValues,valueOptions:this.props.config.valueOptions,fieldObj:this.fieldObj,runtime:!1})),a.jsx(r.Col,{md:3,className:"p-1 clause-controllers-container"},a.jsx("div",{className:"clause-controllers-inline-container"},this.state.supportCaseSensitive?a.jsx(r.Button,{className:"case-sensitive-btn",title:this.i18nMessage("caseSensitive"),onClick:this.toggleCaseSensitive,icon:!0,type:"tertiary",disabled:!!this.props.isHosted},a.jsx(r.Icon,{size:16,icon:this.props.config.caseSensitive?m:f})):null,this.props.mode===u.SqlExpressionMode.All?a.jsx(r.Button,{type:"tertiary",title:this.i18nMessage("askForValues"),onClick:this.toggleAskForValue,icon:!0,className:a.classNames("ask-for-value-btn ml-1 mr-2",{"ask-for-value-active":this.state.isAskForValuePanelDisplay}),disabled:!(!this.props.config.valueOptions||this.props.config.valueOptions.sourceType!==a.ClauseSourceType.Field)},a.jsx(r.Icon,{size:16,icon:this.props.config.askForValueOptions?g:d})):null,a.jsx(r.Button,{type:"tertiary",title:this.i18nMessage("deleteClause"),onClick:this.deleteClause,icon:!0},a.jsx(r.Icon,{icon:h,size:16}))))),this.state.isAskForValuePanelDisplay&&a.jsx("div",{className:"ask-for-value-container"},a.jsx("div",{className:"p-1 d-flex w-100 align-items-center"},a.jsx(r.Checkbox,{ref:function(t){e.askForValueCBX=t},checked:!!this.props.config.askForValueOptions,onClick:this.clickAskForValueCBX}),a.jsx("div",{className:"ml-2 mr-2"},this.i18nMessage("askForValues"))),this.props.config.askForValueOptions&&a.jsx("div",{className:"options-container d-flex"},a.jsx("div",{className:"ask-for-value-item col-md-3 p-1"},a.jsx("div",{className:"ask-for-value-item-label"},this.i18nMessage("label")),a.jsx(r.TextInput,{type:"text",value:this.props.config.askForValueOptions?this.props.config.askForValueOptions.label:this.getLabel(),onChange:function(t){e.onAskForValueOptsChange({label:t.target.value})}})),a.jsx("div",{className:"ask-for-value-item ask-for-value-middle-item col-md-3 p-1"},a.jsx("div",{className:"ask-for-value-item-label"},this.i18nMessage("hint")),a.jsx(r.TextInput,{type:"text",value:this.props.config.askForValueOptions?this.props.config.askForValueOptions.hint:"",onChange:function(t){e.onAskForValueOptsChange({hint:t.target.value})}})),this.isCascadeSupported()&&a.jsx("div",{className:"ask-for-value-item col-md-5 p-1"},a.jsx("div",{className:"ask-for-value-item-label",title:this.i18nMessage("cascade")},this.i18nMessage("cascade")),a.jsx(r.Select,{value:this.props.config.askForValueOptions?this.props.config.askForValueOptions.cascade:a.ClauseCascade.None,onChange:function(t){e.onAskForValueOptsChange({cascade:t.target.value})}},a.jsx("option",{key:0,value:a.ClauseCascade.None},this.i18nMessage("noneCascadeTip")),a.jsx("option",{key:1,value:a.ClauseCascade.Previous},this.i18nMessage("previousCascadeTip")),a.jsx("option",{key:2,value:a.ClauseCascade.All},this.i18nMessage("allCascadeTip"))))))))},t}(a.React.PureComponent);t._SqlExprClause=y;var x=a.themeUtils.withStyles(a.injectIntl(y),"SqlExpressionClause");t.default=x},789:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(790);n(0).ThemeManager.getInstance().registerJimuThemeStyleModule("jimu-ui/sql-expression-builder/",{componentStyles:o});var s=n(435);t.SqlExpressionBuilder=s.default;var a=n(798);t.SqlExpressionBuilderPopup=a.default,function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(799))},790:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(791);t.SqlExpressionBuilder=o.sqlExpressionBuilderStyles;var s=n(792);t.SqlExpressionClause=s.sqlExpressionClauseStyles;var a=n(793);t.SqlExpressionClauseSet=a.sqlExpressionClauseSetStyles;var r=n(794);t.Sort=r.sortStyle},791:function(e,t,n){"use strict";var o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var s,a=n(0);t.sqlExpressionBuilderStyles=function(e){return a.css(s||(s=o(["\n    .sql-expression-builder {\n      .no-data-tip{\n        text-align: center;\n      }\n\n      .builder-btn-container{\n        display: flex;\n        margin: 5px 0 15px 0;\n        .add-button-container{\n          margin-left: auto;\n        }\n      }\n    }\n\n  "],["\n    .sql-expression-builder {\n      .no-data-tip{\n        text-align: center;\n      }\n\n      .builder-btn-container{\n        display: flex;\n        margin: 5px 0 15px 0;\n        .add-button-container{\n          margin-left: auto;\n        }\n      }\n    }\n\n  "])))}},792:function(e,t,n){"use strict";var o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var s,a=n(0);t.sqlExpressionClauseStyles=function(e){var t=e.theme;return a.css(s||(s=o(["\n    .sql-expression-single {\n      background-color: ",";\n      padding: 7px 10px;\n      margin: 15px 0;\n\n      .clause-controllers-container{\n        text-align: right;\n        text-align: -webkit-right;\n        .clause-controllers-inline-container{\n          width: fit-content;\n          display: flex;\n          .case-sensitive-btn.disabled, .case-sensitive-btn.disabled:hover, .case-sensitive-btn:disabled:hover{\n            background: ",";\n            background-color: ",";\n            border: none;\n          }\n          .case-sensitive-btn:disabled .jimu-icon, .ask-for-value-btn:disabled .jimu-icon{\n            opacity: 0.5;\n          }\n\n          /*temp for beta2*/\n          .ask-for-value-active,\n          .dropdown-active {\n            background-color: "," !important;\n            color: "," !important;\n          }\n        }\n      }\n\n      .form-custom-inline{\n        display: flex;\n        flex-flow: row wrap;\n        align-items: center;\n        display: -webkit-box;\n        display: -webkit-flex;\n        display: -ms-flexbox;\n        -webkit-flex-flow: row wrap;\n        -ms-flex-flow: row wrap;\n        -webkit-align-items: center;\n        -webkit-box-align: center;\n        -ms-flex-align: center;\n      }\n      .col-order-icon{\n        padding-left: 0;\n        padding-right: 1em;\n      }\n\n      .ask-for-value-container{\n        .ask-for-value-item{\n          .ask-for-value-item-label{\n            margin-bottom: 3px;\n          }\n        }\n        .ask-for-value-middle-item{\n          margin: 0 0.1rem;\n        }\n      }\n    }\n  "],["\n    .sql-expression-single {\n      background-color: ",";\n      padding: 7px 10px;\n      margin: 15px 0;\n\n      .clause-controllers-container{\n        text-align: right;\n        text-align: -webkit-right;\n        .clause-controllers-inline-container{\n          width: fit-content;\n          display: flex;\n          .case-sensitive-btn.disabled, .case-sensitive-btn.disabled:hover, .case-sensitive-btn:disabled:hover{\n            background: ",";\n            background-color: ",";\n            border: none;\n          }\n          .case-sensitive-btn:disabled .jimu-icon, .ask-for-value-btn:disabled .jimu-icon{\n            opacity: 0.5;\n          }\n\n          /*temp for beta2*/\n          .ask-for-value-active,\n          .dropdown-active {\n            background-color: "," !important;\n            color: "," !important;\n          }\n        }\n      }\n\n      .form-custom-inline{\n        display: flex;\n        flex-flow: row wrap;\n        align-items: center;\n        display: -webkit-box;\n        display: -webkit-flex;\n        display: -ms-flexbox;\n        -webkit-flex-flow: row wrap;\n        -ms-flex-flow: row wrap;\n        -webkit-align-items: center;\n        -webkit-box-align: center;\n        -ms-flex-align: center;\n      }\n      .col-order-icon{\n        padding-left: 0;\n        padding-right: 1em;\n      }\n\n      .ask-for-value-container{\n        .ask-for-value-item{\n          .ask-for-value-item-label{\n            margin-bottom: 3px;\n          }\n        }\n        .ask-for-value-middle-item{\n          margin: 0 0.1rem;\n        }\n      }\n    }\n  "])),t.colors.palette.light[400],t.colors.secondary,t.colors.palette.light[400],t.colors.primary,t.colors.black)}},793:function(e,t,n){"use strict";var o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var s,a=n(0);t.sqlExpressionClauseSetStyles=function(e){var t=e.theme;return a.css(s||(s=o(["\n    .sql-expression-set {\n      margin: 10px 0px;\n      background-color: ",";\n      padding: 5px 0;\n\n      .btn-container{\n        display: flex;\n        margin: 0 10px 7px 10px;\n        padding-top: 9px!important;\n\n        .and-or-container{\n          margin: 0;\n        }\n        .add-button-container{\n          margin-left: auto;\n        }\n      }\n\n      .sql-expression-single{\n        margin: 0;\n        padding: 7px 10px;\n        border-top: 2px solid ",";\n        border-bottom: 2px solid ",";\n      }\n      .sql-expression-single:last-child{\n        border-bottom: none;\n      }\n\n    }\n\n  "],["\n    .sql-expression-set {\n      margin: 10px 0px;\n      background-color: ",";\n      padding: 5px 0;\n\n      .btn-container{\n        display: flex;\n        margin: 0 10px 7px 10px;\n        padding-top: 9px!important;\n\n        .and-or-container{\n          margin: 0;\n        }\n        .add-button-container{\n          margin-left: auto;\n        }\n      }\n\n      .sql-expression-single{\n        margin: 0;\n        padding: 7px 10px;\n        border-top: 2px solid ",";\n        border-bottom: 2px solid ",";\n      }\n      .sql-expression-single:last-child{\n        border-bottom: none;\n      }\n\n    }\n\n  "])),t.colors.palette.light[400],t.colors.palette.light[300],t.colors.palette.light[300])}},794:function(e,t,n){"use strict";var o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var s,a=n(0);t.sortStyle=function(e){var t=e.theme,n=t.colors;return a.css(s||(s=o(["\n    width:100%;\n    .sort-title {\n        margin-bottom: 20px;\n        color: ",";\n        font-size: 16px;\n    }\n    .delete-all-button {\n        cursor: pointer;\n    }\n    .multi-sort-list-con {\n        margin-bottom: 10px;\n        background:",";\n        padding:10px;\n        box-shadow: 0 0 0 2px ",";\n    }\n    .multi-sort-select-con {\n        & {\n            display: flex;\n            align-items: center;\n        }\n        .sort-field-selector {\n            background:",";\n            border-radius: 2px;\n            width: 61%;\n        }\n\n        .delete-button {\n            flex:1;\n            cursor: pointer;\n            text-align:right;\n        }\n        .delete-button svg {\n            margin-right:0;\n        }\n    }\n    .delete-sort-con {\n        & {\n            margin-left:5px;\n        }\n        .sort-button-l {\n            border-radius: 2px 0 0 2px;\n            border-right:none;\n        }\n        .sort-button-r {\n            border-radius: 0px 2px 2px 0px;\n            border-left:none;\n        }\n        .sort-button {\n            border-color: ",";\n        }\n        svg {\n            margin-right:0;\n        }\n    }\n    .add-option .add-option-button{\n        & {\n            width:100%;\n            font-size:14px;\n            display: block;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n        }\n        svg {\n            margin-right:0;\n            margin-right:5px;\n        }\n    }\n    .no-sort-remind {\n        margin: 70px auto 0;\n        color: ",";\n        font-size: 13px;\n        text-align: center;\n    }\n  "],["\n    width:100%;\n    .sort-title {\n        margin-bottom: 20px;\n        color: ",";\n        font-size: 16px;\n    }\n    .delete-all-button {\n        cursor: pointer;\n    }\n    .multi-sort-list-con {\n        margin-bottom: 10px;\n        background:",";\n        padding:10px;\n        box-shadow: 0 0 0 2px ",";\n    }\n    .multi-sort-select-con {\n        & {\n            display: flex;\n            align-items: center;\n        }\n        .sort-field-selector {\n            background:",";\n            border-radius: 2px;\n            width: 61%;\n        }\n\n        .delete-button {\n            flex:1;\n            cursor: pointer;\n            text-align:right;\n        }\n        .delete-button svg {\n            margin-right:0;\n        }\n    }\n    .delete-sort-con {\n        & {\n            margin-left:5px;\n        }\n        .sort-button-l {\n            border-radius: 2px 0 0 2px;\n            border-right:none;\n        }\n        .sort-button-r {\n            border-radius: 0px 2px 2px 0px;\n            border-left:none;\n        }\n        .sort-button {\n            border-color: ",";\n        }\n        svg {\n            margin-right:0;\n        }\n    }\n    .add-option .add-option-button{\n        & {\n            width:100%;\n            font-size:14px;\n            display: block;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n        }\n        svg {\n            margin-right:0;\n            margin-right:5px;\n        }\n    }\n    .no-sort-remind {\n        margin: 70px auto 0;\n        color: ",";\n        font-size: 13px;\n        text-align: center;\n    }\n  "])),n.black,n.palette.light[500],a.polished.rgba(n.white,.3),n.palette.secondary[200],t.border.color,n.palette.light[800])}},795:function(e,t,n){"use strict";var o,s=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(3),i=n(14),l=n(117),p=function(e){function t(t){var n=e.call(this,t)||this;return n.i18nMessage=function(e){return n.props.intl.formatMessage({id:e,defaultMessage:i.default[e]})},n.onChange=function(e){n.props&&n.props.onChange(e.target.value)},n}return s(t,e),t.prototype.render=function(){var e=this,t=this.props.list?this.props.list:this.props.value?[this.props.value]:[];return a.React.createElement(r.Select,{value:this.props.value||"",onChange:this.onChange},t.map((function(t,n){var o=e.i18nMessage(l.getCamelCase(t));return a.React.createElement("option",{key:n,value:t,label:o},o)})))},t}(a.React.PureComponent);t._OperatorSelector=p,t.OperatorSelector=a.injectIntl(p)},796:function(e,t,n){"use strict";var o,s=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(3),i=n(14),l=n(117),p=n(331),c=function(e){function t(t){var n=e.call(this,t)||this;return n.i18nMessage=function(e){return n.props.intl.formatMessage({id:e,defaultMessage:i.default[e]})},n.updateDisplayList=function(){var e=[],t=function(t){e.push({sourceType:t}),n.props.list[t].some((function(n){e.push({sourceType:t,inputEditor:n})}))};for(var o in n.props.list)t(o);n.setState({displayList:e})},n.onTypeSelect=function(e,t){n.props.onSelect(e,t)},n.toggle=function(){n.setState({isOpen:!n.state.isOpen})},n.state={isOpen:!1,displayList:[]},n._isMounted=!1,n}return s(t,e),t.prototype.componentDidMount=function(){this._isMounted=!0,this.updateDisplayList()},t.prototype.componentWillUnmount=function(){this._isMounted=!1},t.prototype.componentDidUpdate=function(e,t){this.props.list&&this.props.list!==e.list&&this.updateDisplayList()},t.prototype.render=function(){var e=this;return a.jsx("div",{className:"ml-1 mr-1 source-type-chooser"},a.jsx(r.Dropdown,{isOpen:this.state.isOpen,toggle:this.toggle,activeIcon:!0},a.jsx(r.DropdownButton,{arrow:!1,icon:!0,type:"default",title:this.i18nMessage("selectInputEditor"),onClick:this.toggle,"data-toggle":"dropdown"},a.jsx(r.Icon,{icon:p,className:"text-dark dropdown-icon",size:16})),a.jsx(r.DropdownMenu,{showArrow:!0},a.jsx(r.DropdownItem,{header:!0},this.i18nMessage("selectInputEditor")),this.state.displayList.map((function(t,n){return t.inputEditor?a.jsx(r.DropdownItem,{key:n,onClick:function(){e.onTypeSelect(t.sourceType,t.inputEditor)},active:e.props.inputEditorType===t.inputEditor},e.i18nMessage(l.getCamelCase(t.inputEditor))):a.jsx(a.React.Fragment,{key:n},a.jsx(r.DropdownItem,{divider:!0}),a.jsx(r.DropdownItem,{header:!0,tag:"p"},e.i18nMessage(l.getCamelCase(t.sourceType))))})))))},t}(a.React.PureComponent);t._DisplayTypeSelector=c;var u=a.injectIntl(c);t.default=u},797:function(e,t,n){"use strict";var o,s=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(3),i=n(436),l=n(117),p=n(14),c=n(158),u=n(34),d=function(e){function t(t){var n=e.call(this,t)||this;return n.i18nMessage=function(e){return n.props.intl.formatMessage({id:e,defaultMessage:p.default[e]})},n.addClause=function(e){var t=l.getDefaultSingleClause(),o=n.state.partsArray.concat(t);n._setStates(o)},n.deleteClauseSet=function(e){n.props.onChange&&n.props.onChange(null,n.props.id)},n.changeAndOR=function(e){n.setState({logicalOperator:e})},n.onClauseChange=function(e,t){var o=l.getClauseArrayByChange(n.state.partsArray,e,t);n._setStates(o)},n._setStates=function(e){e.length<2?n.setState({partsArray:e,logicalOperator:a.ClauseLogic.And}):n.setState({partsArray:e})},n.LogicalOperator=null,n.state={logicalOperator:n.props.config&&n.props.config.logicalOperator?n.props.config.logicalOperator:a.ClauseLogic.And,partsArray:n.props.config&&n.props.config.parts?n.props.config.parts:a.Immutable([])},n}return s(t,e),t.prototype.componentDidUpdate=function(e,t){if(this.state.partsArray!==t.partsArray||this.state.logicalOperator!==t.logicalOperator){var n=0===this.state.partsArray.length?null:{type:a.ClauseType.Set,logicalOperator:this.state.logicalOperator,parts:this.state.partsArray};this.props.onChange&&this.props.onChange(n,this.props.id)}},t.prototype.render=function(){var e=this;return a.jsx("div",{className:this.props.className?this.props.className:""},0===this.state.partsArray.length?null:a.jsx("div",{className:"sql-expression-set"},a.jsx("div",{className:"btn-container p-1"},this.state.partsArray.length<2?null:a.jsx(r.ButtonGroup,{className:"and-or-container"},a.jsx(r.Button,{onClick:function(){e.changeAndOR(a.ClauseLogic.And)},size:"sm",type:this.state.logicalOperator===a.ClauseLogic.And?"primary":"secondary"},this.i18nMessage("and")),a.jsx(r.Button,{onClick:function(){e.changeAndOR(a.ClauseLogic.Or)},className:"ml-0",size:"sm",type:this.state.logicalOperator===a.ClauseLogic.Or?"primary":"secondary"},this.i18nMessage("or"))),a.jsx("div",{className:"add-button-container"},a.jsx(r.Button,{type:"tertiary",onClick:this.addClause,className:"mr-2",icon:!0,title:this.i18nMessage("addClause")},a.jsx(r.Icon,{icon:c,size:16})),a.jsx(r.Button,{type:"tertiary",onClick:this.deleteClauseSet,icon:!0,title:this.i18nMessage("deleteClauseSet")},a.jsx(r.Icon,{icon:u,size:16})))),this.state.partsArray.map((function(t,n){return a.jsx(i.default,{key:n.toString(),id:"clause_set_clause_"+n,config:t,isHosted:e.props.isHosted,mode:e.props.mode,selectedDs:e.props.selectedDs,onChange:e.onClauseChange})}))))},t}(a.React.PureComponent);t._SqlExprClauseSet=d;var g=a.themeUtils.withStyles(a.injectIntl(d),"SqlExpressionClauseSet");t.default=g},798:function(e,t,n){"use strict";var o,s=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},r=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(n[o[s]]=e[o[s]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),l=n(3),p=n(435),c=n(14),u=n(117),d=n(336),g=function(e){function t(t){var n=e.call(this,t)||this;return n.externalDsStyle={maxWidth:"960px"},n.handleToggle=function(e){!0!==e&&!1!==e&&n.setState({isValid:!0,sqlExprObj:n.props.config}),e=void 0!==e&&e,n.setState({isOpen:!1});var t=n.props,o=t.toggle;void 0!==t.isOpen&&o&&o(e)},n.handleOkBtn=function(){u.isSqlExpressionValid(n.state.sqlExprObj)?(n.handleToggle(!0),n.props.onChange&&n.props.onChange(n.state.sqlExprObj)):n.setState({isValid:!1})},n.handleCloseBtn=function(){n.setState({isValid:!0,sqlExprObj:n.props.config}),n.handleToggle(!1)},n.i18nMessage=function(e){var t=n.props.intl;return t?t.formatMessage({id:e,defaultMessage:c.default[e]}):""},n.onChange=function(e){n.setState({isValid:!0,sqlExprObj:e})},n.state={isValid:!0,isOpen:!!t.isOpen,sqlExprObj:n.props.config},n}return s(t,e),t.prototype.componentDidUpdate=function(e,t){this.props.config!==e.config&&this.setState({sqlExprObj:this.props.config})},t.prototype.render=function(){var e=this,t=this.props.isOpen;t=void 0===t?this.state.isOpen:t;var n=this.props,o=(n.config,r(n,["config"]));return i.jsx("div",null,i.jsx(l.Modal,{backdrop:"static",centered:!0,isOpen:t,toggle:function(){return e.handleToggle(void 0)},className:"sql-expression-builder-modal",contentClassName:"border-0 h-100",style:this.externalDsStyle,returnfocusafterclose:"true",size:"lg"},i.jsx(l.ModalHeader,{tag:"h4",toggle:this.handleCloseBtn},this.i18nMessage("builderName")),i.jsx(l.ModalBody,null,i.jsx("div",null,i.jsx(p.default,a({},o,{config:this.state.sqlExprObj,onChange:this.onChange})))),i.jsx(l.ModalFooter,null,i.jsx("div",{className:"m-0 w-100 d-block"},!this.state.isValid&&i.jsx("div",{style:{color:this.props.theme.colors.palette.danger[700],fontSize:this.props.theme.sizes[3],marginTop:"-32px",marginBottom:"8px"}},i.jsx(l.Icon,{icon:d,size:18,color:this.props.theme.colors.palette.danger[700],className:"mr-2"}),this.i18nMessage("sqlExprIncomplete")),i.jsx("div",{className:"d-flex"},i.jsx(l.Button,{type:"primary",onClick:this.handleOkBtn,className:"ml-auto mr-2",style:{minWidth:"64px"}},this.props.intl.formatMessage({id:"ok",defaultMessage:i.defaultMessages.ok})),i.jsx(l.Button,{type:"secondary",onClick:this.handleCloseBtn,style:{minWidth:"64px"}},this.props.intl.formatMessage({id:"cancel",defaultMessage:i.defaultMessages.cancel})))))))},t}(i.React.PureComponent);t.SqlExpressionBuilderPopup=i.themeUtils.withTheme(i.injectIntl(g)),t.default=t.SqlExpressionBuilderPopup},799:function(e,t,n){"use strict";var o,s=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(3),l=n(197),p=n(14),c=function(e){function t(t){var o=e.call(this,t)||this;return o.initData=function(){if(Array.isArray(o.props.value)&&o.props.value.length)return!1;var e=[a({},o.state.option)];o.props.onChange(e)},o.onOptionChange=function(e,t,n){var s=o.deepClone(o.props.value);s[e][t]=n,o.props.onSortButtonClick?o.props.onSortButtonClick(s,e):o.props.onChange(s,e)},o.onSelectChange=function(e,t){var n=o.deepClone(o.props.value),s=e.name;n[t].jimuFieldName=s,o.props.onSelect?o.props.onSelect(n,t):o.props.onChange(n,t)},o.addOption=function(){var e=Array.isArray(o.props.value),t=o.deepClone(o.state.option),n=e?o.deepClone(o.props.value):[];n.push(t),o.props.onAddOption?o.props.onAddOption(n):o.props.onChange(n)},o.delecteOption=function(e){var t=o.deepClone(o.props.value);t.splice(e,1),o.props.onDelete?o.props.onDelete(t):o.props.onChange(t)},o.deepClone=function(e){var t=Array.isArray(e)?[]:{};for(var n in e){var s=("object"==typeof e[n]||"function"==typeof e[n])&&null!==e[n];t[n]=s?o.deepClone(e[n]):e[n]}return t},o.createOptionElement=function(e,t,s){var a=o.props.value[s].jimuFieldName?r.Immutable([o.props.value[s].jimuFieldName]):r.Immutable([]);return r.jsx("div",{className:"multi-sort-list-con",key:s},r.jsx("div",{className:"multi-sort-select-con"},o.props.useDataSource&&r.jsx("div",{className:"sort-field-selector"},r.jsx(l.FieldSelector,{dataSources:[e],onSelect:function(e,t,n){o.onSelectChange(t,s)},selectedFields:a,isSearchInputHidden:!0,isDataSourceDropDownHidden:!0,useDropdown:!0})),r.jsx("div",{className:"delete-sort-con"},r.jsx(i.Button,{className:"sort-button sort-button-l",type:t.order==r.OrderRule.Asc?"primary":"secondary",title:o.nls("ascending"),onClick:function(){o.onOptionChange(s,"order",r.OrderRule.Asc)}},r.jsx(i.Icon,{size:"12",icon:n(153),className:"sort-arrow-down-icon"})),r.jsx(i.Button,{className:"sort-button sort-button-r",type:t.order==r.OrderRule.Desc?"primary":"secondary",title:o.nls("decending"),onClick:function(){o.onOptionChange(s,"order",r.OrderRule.Desc)}},r.jsx(i.Icon,{size:"12",icon:n(154),className:"sort-arrow-down-icon"}))),r.jsx("div",{className:"delete-button",title:o.nls("deleteOption"),onClick:function(){o.delecteOption(s)}},r.jsx(i.Icon,{size:"12",icon:n(35),className:"sort-arrow-down-icon"}))))},o.nls=function(e){return o.props.intl?o.props.intl.formatMessage({id:e,defaultMessage:p.default[e]}):e},o.onDataSourceCreated=function(e){},o.state={option:{jimuFieldName:"",order:r.OrderRule.Asc}},o}return s(t,e),t.prototype.componentDidMount=function(){this.initData()},t.prototype.render=function(){var e,t=this,o=this.props.value,s=this.props.intl.formatMessage({id:"invalidExpression",defaultMessage:p.default.invalidExpression});return r.jsx("div",{className:r.classNames("multi-sort",(e={},e[this.props.className]=!!this.props.className,e))},r.jsx(r.DataSourceComponent,{useDataSource:this.props.useDataSource,onDataSourceCreated:this.onDataSourceCreated},(function(e){return Array.isArray(t.props.value)?o.asMutable().map((function(n,o){return t.createOptionElement(e,n,o)})):s})),r.jsx("div",{className:"add-option"},r.jsx(i.Button,{className:"add-option-button",onClick:this.addOption,title:this.props.intl.formatMessage({id:"addSortBtntext",defaultMessage:p.default.addSortBtntext})},r.jsx(i.Icon,{size:"12",icon:n(158),className:"sort-arrow-down-icon"}),this.props.intl.formatMessage({id:"addSortBtntext",defaultMessage:p.default.addSortBtntext}))),Array.isArray(o)&&0==o.length&&r.jsx("div",{className:"no-sort-remind"},r.jsx("div",null,this.props.intl.formatMessage({id:"noSortRemindText",defaultMessage:p.default.noSortRemindText}),"."),r.jsx("div",null,this.props.intl.formatMessage({id:"pleaceAddOne",defaultMessage:p.default.pleaceAddOne}))))},t}(r.React.PureComponent);t.Sort=r.themeUtils.withStyles(r.injectIntl(c),"Sort")}})}));