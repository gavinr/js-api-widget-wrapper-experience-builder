define(["jimu-core","jimu-ui","jimu-layouts/common","jimu-layouts/layout-runtime"],(function(t,e,o,n){return function(t){var e={};function o(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=625)}({10:function(t,e){t.exports=o},182:function(t,e,o){"use strict";var n,i=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var s,l,a,p,d,c,u,f,h,y,S=o(3),g=o(10),b=o(4),v=o(27),m=o(183),x=S.css(s||(s=i(["\n  transition: all 200ms;\n"],["\n  transition: all 200ms;\n"]))),w=function(t){function e(e){var o=t.call(this,e)||this;o.removeSplitHandler=function(){o.interactable&&(o.interactable.unset(),o.interactable=null)},o.toggleSidebar=function(t){t.stopPropagation(),S.getAppStore().dispatch(S.appActions.widgetStatePropChange(o.props.widgetId,"collapse",!o.props.sidebarVisible))};var n=o.props.config;return o.state={isResizing:!1,deltaSize:0},S.getAppStore().dispatch(S.appActions.widgetStatePropChange(o.props.widgetId,"collapse",0!==n.defaultState)),o}return r(e,t),e.prototype.componentDidMount=function(){var t=this.props,e=t.firstLayouts,o=t.secondLayouts;e&&o&&this.bindSplitHandler()},e.prototype.componentDidUpdate=function(){var t=this.props,e=t.firstLayouts,o=t.secondLayouts;e&&o&&!this.interactable&&this.bindSplitHandler(),this.interactable&&this.interactable.draggable({startAxis:this.props.direction===v.SidebarType.Horizontal?"x":"y",lockAxis:this.props.direction===v.SidebarType.Horizontal?"x":"y"})},e.prototype.componentWillUnmount=function(){this.removeSplitHandler()},e.prototype.calSidebarSize=function(){var t=this.props.config;return 0!==this.state.deltaSize?g.isPercentage(t.size)?parseFloat(t.size)*this.domSize/100+this.state.deltaSize+"px":parseFloat(t.size)+this.state.deltaSize+"px":t.size},e.prototype.createCollapsibleSide=function(t,e){var o,n=this.props,r=n.config,s=n.direction,d=this.calSidebarSize(),c=this.shouldFlipLeftAndRight();o=s===v.SidebarType.Horizontal?S.css(l||(l=i(["\n        width: ",";\n        transform: ",";\n        top: ",";\n        bottom: ",";\n        left: ",";\n        right: ",";\n      "],["\n        width: ",";\n        transform: ",";\n        top: ",";\n        bottom: ",";\n        left: ",";\n        right: ",";\n      "])),d,r.overlay&&!this.props.sidebarVisible?r.collapseSide!==v.CollapseSides.First||c?"translateX("+d+")":"translateX(-"+d+")":"none",r.overlay?0:"auto",r.overlay?0:"auto",r.overlay&&e===v.CollapseSides.First&&!c?0:"auto",r.overlay&&e===v.CollapseSides.Second&&!c?0:"auto"):S.css(a||(a=i(["\n        height: ",";\n        transform: ",";\n        left: ",";\n        right: ",";\n        top: ",";\n        bottom: ",";\n      "],["\n        height: ",";\n        transform: ",";\n        left: ",";\n        right: ",";\n        top: ",";\n        bottom: ",";\n      "])),d,r.overlay&&!this.props.sidebarVisible?r.collapseSide===v.CollapseSides.First?"translateY(-"+d+")":"translateY("+d+")":"none",r.overlay?0:"auto",r.overlay?0:"auto",r.overlay&&e===v.CollapseSides.First?0:"auto",r.overlay&&e===v.CollapseSides.Second?0:"auto");var u=this.layoutItemComponent;return S.jsx("div",{css:S.css(p||(p=i(["\n        ","\n        ","\n        position: ",";\n        overflow: visible;\n        z-index: 2;\n        flex-grow: 0;\n        flex-shrink: 0;\n        flex-basis: auto;\n      "],["\n        ","\n        ","\n        position: ",";\n        overflow: visible;\n        z-index: 2;\n        flex-grow: 0;\n        flex-shrink: 0;\n        flex-basis: auto;\n      "])),this.state.isResizing?"":x,o,r.overlay?"absolute":"relative"),className:S.classNames("d-flex",{"flex-column":s===v.SidebarType.Vertical})},S.jsx(u,{innerLayouts:t,itemStyle:e===v.CollapseSides.First?r.firstPanelStyle:r.secondPanelStyle,collapsed:!this.props.sidebarVisible,className:S.classNames({"h-100":s===v.SidebarType.Vertical,"w-100":s===v.SidebarType.Horizontal})}),this.createController(c))},e.prototype.splitStyle=function(t){var e=this.props,o=e.theme,n=e.direction,r=e.config;if(!(t||r.divider&&r.divider.visible&&r.divider.lineStyle||!1!==r.resizable))return null;var s=this.calSidebarSize(),l=!this.props.sidebarVisible,a=r.divider&&r.divider.visible&&r.divider.lineStyle?b.styleUtils.toCSSBorder(r.divider.lineStyle):t?"1px solid "+o.colors.palette.light[500]:"none";return n===v.SidebarType.Horizontal?S.css(d||(d=i(["\n        width: 1px;\n        border-left: ",";\n        position: ",";\n        left: ",";\n        right: ",";\n        height: ",";\n        &:after {\n          display: ",";\n          position: absolute;\n          content: '';\n          width: 10px;\n          top: 0;\n          bottom: 0;\n          left: -5px;\n          cursor: col-resize;\n        }\n        z-index: 3;\n      "],["\n        width: 1px;\n        border-left: ",";\n        position: ",";\n        left: ",";\n        right: ",";\n        height: ",";\n        &:after {\n          display: ",";\n          position: absolute;\n          content: '';\n          width: 10px;\n          top: 0;\n          bottom: 0;\n          left: -5px;\n          cursor: col-resize;\n        }\n        z-index: 3;\n      "])),a,r.overlay?"absolute":"relative",r.overlay&&!l&&r.collapseSide===v.CollapseSides.First?s:"auto",r.overlay&&!l&&r.collapseSide===v.CollapseSides.Second?s:"auto",r.overlay?"100%":"auto",!1!==r.resizable?"block":"none"):S.css(c||(c=i(["\n      height: 1px;\n      border-top: ",";\n      position: ",";\n      top: ",";\n      bottom: ",";\n      width: ",";\n      &:after {\n        display: ",";\n        position: absolute;\n        content: '';\n        height: 10px;\n        top: -5px;\n        right: 0;\n        left: 0;\n        cursor: row-resize;\n      }\n      z-index: 3;\n    "],["\n      height: 1px;\n      border-top: ",";\n      position: ",";\n      top: ",";\n      bottom: ",";\n      width: ",";\n      &:after {\n        display: ",";\n        position: absolute;\n        content: '';\n        height: 10px;\n        top: -5px;\n        right: 0;\n        left: 0;\n        cursor: row-resize;\n      }\n      z-index: 3;\n    "])),a,r.overlay?"absolute":"relative",r.overlay&&!l&&r.collapseSide===v.CollapseSides.First?s:"auto",r.overlay&&!l&&r.collapseSide===v.CollapseSides.Second?s:"auto",r.overlay?"100%":"auto",!1!==r.resizable?"block":"none")},e.prototype.createController=function(t){var e=this.props,o=e.config,n=e.theme,r=e.direction;if(o.toggleBtn&&!o.toggleBtn.visible)return null;var s,l,a,p=this.props.sidebarVisible?o.toggleBtn.collapseStyle:o.toggleBtn.expandStyle,d=0,c=0;if(r===v.SidebarType.Horizontal){o.toggleBtn.position===v.SidebarControllerPositions.Start?s=0:o.toggleBtn.position===v.SidebarControllerPositions.Center&&(s="50%",c=-o.toggleBtn.height/2);var y=this.shouldFlipLeftAndRight();a=S.css(u||(u=i(["\n        top: ",";\n        bottom: ",";\n        right: ",";\n        left: ",";\n      "],["\n        top: ",";\n        bottom: ",";\n        right: ",";\n        left: ",";\n      "])),o.toggleBtn.position!==v.SidebarControllerPositions.End?s:"auto",o.toggleBtn.position===v.SidebarControllerPositions.End?0:"auto",o.collapseSide!==v.CollapseSides.First||y?"auto":0,o.collapseSide!==v.CollapseSides.Second||y?"auto":0)}else o.toggleBtn.position===v.SidebarControllerPositions.Start?l=0:o.toggleBtn.position===v.SidebarControllerPositions.Center&&(l="50%",d=-o.toggleBtn.width/2),a=S.css(f||(f=i(["\n        left: ",";\n        right: ",";\n        bottom: ",";\n        top: ",";\n      "],["\n        left: ",";\n        right: ",";\n        bottom: ",";\n        top: ",";\n      "])),o.toggleBtn.position!==v.SidebarControllerPositions.End?l:"auto",o.toggleBtn.position===v.SidebarControllerPositions.End?0:"auto",o.collapseSide===v.CollapseSides.First?0:"auto",o.collapseSide===v.CollapseSides.Second?0:"auto");var g=p.style,b=o.toggleBtn,x=b.iconSize,w=b.width,_=b.height,C=b.color,z=b.icon;return S.jsx("div",{css:S.css(h||(h=i(["\n          ","\n          position: absolute;\n          transform: translate(","px, ","px);\n        "],["\n          ","\n          position: absolute;\n          transform: translate(","px, ","px);\n        "])),a,o.toggleBtn.offsetX+d,o.toggleBtn.offsetY+c),onClick:this.toggleSidebar},S.jsx(m.SidebarController,{theme:n,icon:z,iconSize:x,expanded:this.props.sidebarVisible,width:w,height:_,color:C,style:g,shouldFlip:t}))},e.prototype.createNormalSide=function(t,e){var o=this.layoutItemComponent,n=this.props.config;return S.jsx("div",{css:this.state.isResizing?"":x,className:"flex-shrink-0 flex-grow-1 d-flex",style:{zIndex:0,flexBasis:this.props.sidebarVisible?"0":"100%",overflow:"auto"}},S.jsx(o,{itemStyle:e===v.CollapseSides.First?n.firstPanelStyle:n.secondPanelStyle,innerLayouts:t,className:"w-100"}))},e.prototype.shouldFlipLeftAndRight=function(){return this.props.direction===v.SidebarType.Horizontal&&S.getAppStore().getState().appContext.isRTL},e.prototype.render=function(){var t=this,e=this.props,o=e.config,n=e.firstLayouts,r=e.secondLayouts,s=e.direction;return n&&r?S.jsx(g.PageContext.Consumer,null,(function(e){var l=e.builderTheme,a=e.isDesignMode?"1px dashed "+S.polished.rgba(l.colors.palette.dark[300],.3):"none";return S.jsx("div",{className:S.classNames("d-flex w-100",{"flex-column":s===v.SidebarType.Vertical}),ref:function(e){return t.ref=e},css:S.css(y||(y=i(["\n            border: ",";\n            position: relative;\n            overflow: hidden;\n            justify-content: ",";\n          "],["\n            border: ",";\n            position: relative;\n            overflow: hidden;\n            justify-content: ",";\n          "])),a,o.collapseSide===v.CollapseSides.First?"flex-end":"flex-start")},o.collapseSide===v.CollapseSides.First?t.createCollapsibleSide(n,v.CollapseSides.First):t.createNormalSide(n,v.CollapseSides.First),S.jsx("div",{css:t.splitStyle(e.isDesignMode),ref:function(e){return t.splitRef=e}}),o.collapseSide===v.CollapseSides.Second?t.createCollapsibleSide(r,v.CollapseSides.Second):t.createNormalSide(r,v.CollapseSides.Second))})):S.jsx(b.Loading,null)},e}(S.React.PureComponent);e.BaseSidebarLayout=w},183:function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};Object.defineProperty(e,"__esModule",{value:!0});var s=o(3),l=o(4),a=o(27),p={};p[a.ICON_TYPE.Left]=o(25),p[a.ICON_TYPE.Right]=o(39),p[a.ICON_TYPE.Up]=o(55),p[a.ICON_TYPE.Down]=o(33);var d,c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getStyle=function(){var t=this.props,e=t.width,o=t.height;return s.css(d||(d=r(["\n      padding: 0;\n      width: ","px;\n      height: ","px;\n\n      .jimu-icon {\n        margin: 0;\n      }\n    "],["\n      padding: 0;\n      width: ","px;\n      height: ","px;\n\n      .jimu-icon {\n        margin: 0;\n      }\n    "])),e,o)},e.prototype.flipStyle=function(t){if(!this.props.shouldFlip)return t;var e=s.Immutable(t);if(t.borderRadius){var o=t.borderRadius.split(" ");e=e.set("borderRadius",o[1]+" "+o[0]+" "+o[3]+" "+o[2])}return e},e.prototype.render=function(){var t=this.props,e=t.icon,o=t.iconSize,n=t.style,i=t.expanded,r=t.shouldFlip?180:0;return s.jsx(l.Button,{className:"sidebar-controller d-flex justify-content-center align-items-center",css:this.getStyle(),style:this.flipStyle(n)},s.jsx(l.Icon,{className:"icon",rotate:i?0+r:180+r,icon:p[e],size:o}))},e}(s.React.PureComponent);e.SidebarController=c},20:function(t,e){t.exports=n},25:function(t,e){t.exports='<svg viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="none"><path d="M4.916 7l5.052 5.125c.31.315.31.825 0 1.14a.786.786 0 01-1.123 0L3.232 7.568a.814.814 0 010-1.138L8.845.736a.786.786 0 011.123 0c.31.314.31.824 0 1.139L4.916 7z" fill="#000"></path><path d="M0 0h14v14H0z"></path></g></svg>'},27:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i,r,s,l=o(3),a=o(4);!function(t){t.First="FIRST",t.Second="SECOND"}(n=e.CollapseSides||(e.CollapseSides={})),function(t){t.Start="START",t.Center="CENTER",t.End="END"}(i=e.SidebarControllerPositions||(e.SidebarControllerPositions={})),function(t){t.Horizontal="HORIZONTAL",t.Vertical="VERTICAL"}(r=e.SidebarType||(e.SidebarType={})),function(t){t.Left="LEFT",t.Right="RIGHT",t.Up="UP",t.Down="DOWN"}(s=e.ICON_TYPE||(e.ICON_TYPE={})),e.defaultConfig=l.Immutable({direction:r.Horizontal,collapseSide:n.First,overlay:!1,size:"300px",divider:{visible:!0,lineStyle:{type:a.LineType.SOLID,color:"var(--light-500)",width:{distance:1,unit:a.UnitTypes.PIXEL}}},resizable:!1,toggleBtn:{visible:!0,icon:s.Left,offsetX:15,offsetY:0,position:i.Center,iconSize:14,width:15,height:60,color:{normal:{icon:{useTheme:!1,color:"#FFFFFF"},bg:{useTheme:!0,color:"colors.primary"}},hover:{bg:{useTheme:!0,color:"colors.palette.primary[600]"}}},expandStyle:{style:{borderRadius:"0 92px 92px 0"}},collapseStyle:{style:{borderRadius:"0 92px 92px 0"}}},defaultState:1})},3:function(e,o){e.exports=t},33:function(t,e){t.exports='<svg viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="none"><path d="M7 8.684l5.125-5.052a.814.814 0 011.14 0 .786.786 0 010 1.123l-5.696 5.613a.814.814 0 01-1.138 0L.736 4.755a.786.786 0 010-1.123.814.814 0 011.139 0L7 8.684z" fill="#000"></path><path d="M0 0h14v14H0z"></path></g></svg>'},39:function(t,e){t.exports='<svg viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="none"><path d="M8.784 7L3.732 1.875a.814.814 0 010-1.14.786.786 0 011.123 0l5.613 5.696c.31.314.31.824 0 1.138l-5.613 5.695a.786.786 0 01-1.123 0 .814.814 0 010-1.139L8.784 7z" fill="#000"></path><path d="M0 0h14v14H0z"></path></g></svg>'},4:function(t,o){t.exports=e},55:function(t,e){t.exports='<svg viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="none"><path d="M7 5.316l-5.125 5.052a.814.814 0 01-1.14 0 .786.786 0 010-1.123l5.696-5.613a.814.814 0 011.138 0l5.695 5.613a.786.786 0 010 1.123.814.814 0 01-1.139 0L7 5.316z" fill="#000"></path><path d="M0 0h14v14H0z"></path></g></svg>'},625:function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o(3),s=o(626),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.render=function(){var t=this.props,e=t.layouts,o=t.theme,n=t.builderSupportModules,i=window.jimuConfig.isInBuilder?n.widgetModules.SidebarLayoutBuilder:s.SidebarLayout;return i?r.jsx("div",{className:"widget-sidebar-layout d-flex w-100 h-100"},r.jsx(i,{theme:o,widgetId:this.props.id,direction:this.props.config.direction,firstLayouts:e.FIRST,secondLayouts:e.SECOND,config:this.props.config,sidebarVisible:this.props.sidebarVisible})):r.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},"No layout component!")},e.mapExtraStateProps=function(t,e){var o,n,i,r;return{sidebarVisible:(r=null===(i=null===(n=null===(o=t)||void 0===o?void 0:o.widgetsState)||void 0===n?void 0:n[e.id])||void 0===i?void 0:i.collapse,null==r||r)}},e}(r.BaseWidget);e.default=l},626:function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o(3),s=o(627),l=o(27),a=function(t){function e(e){var o=t.call(this,e)||this;return o.bindSplitHandler=function(){o.interactModule?o.initHandler():r.moduleLoader.loadModule("jimu-core/dnd").then((function(t){o.interactModule=t.interact,o.initHandler()}))},o.layoutItemComponent=s.SidebarLayoutItem,o}return i(e,t),e.prototype.initHandler=function(){var t,e,o=this,n=this.props.config;this.splitRef&&!1!==n.resizable&&!this.interactable&&(this.interactable=this.interactModule(this.splitRef).origin("parent").draggable({inertia:!1,autoScroll:!1,modifiers:[this.interactModule.modifiers.restrict({restriction:"parent"})],startAxis:this.props.direction===l.SidebarType.Horizontal?"x":"y",lockAxis:this.props.direction===l.SidebarType.Horizontal?"x":"y",onstart:function(n){n.stopPropagation(),o.props.direction===l.SidebarType.Horizontal?(t=o.state.deltaSize,e=0):(t=0,e=o.state.deltaSize);var i=o.ref.getBoundingClientRect();o.domSize=o.props.direction===l.SidebarType.Horizontal?i.width:i.height,o.setState({isResizing:!0})},onmove:function(n){n.stopPropagation(),t+=n.dx,e+=n.dy,o.props.direction===l.SidebarType.Horizontal?o.props.config.collapseSide===l.CollapseSides.First?o.setState({deltaSize:t}):o.setState({deltaSize:-t}):o.props.config.collapseSide===l.CollapseSides.First?o.setState({deltaSize:e}):o.setState({deltaSize:-e})},onend:function(t){t.stopPropagation(),o.setState({isResizing:!1})}}))},e}(o(182).BaseSidebarLayout);e.SidebarLayout=a},627:function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var s=o(3),l=o(20),a=o(4),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.render=function(){var t=this.props,e=t.style,o=t.className,n=t.innerLayouts,i=t.itemStyle;return s.React.createElement("div",{className:s.classNames("side d-flex",o),style:r(r(r({},e),a.styleUtils.toCSSStyle(i)),{overflow:"auto"})},s.React.createElement(l.LayoutEntry,{className:"border-0",layouts:n,isInWidget:!0,ignoreMinHeight:!0}))},e}(s.React.PureComponent);e.SidebarLayoutItem=p}})}));